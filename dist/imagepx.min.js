if(!RedactorPlugins)var RedactorPlugins={};!function(a){RedactorPlugins.imagepx=function(){return{init:function(){var b=this;this.modal.addCallback("imageEdit",a.proxy(this.imagepx.imageEdit,this)),!1!==b.opts.showDimensionsOnResize&&b.$element.on("moveResizeCallback",function(b,c){var d=c.el.el.parent(),e=c.w+"x"+c.h;d.find(".dimensions")[0]?d.find(".dimensions").html(e):d.append(function(){var b=a('<p class="dimensions" />');return b.html(e),b}())})},imageEdit:function(){function b(b){g.val()?(l.width(g.val()),k=!0):l.width(""),h.val()?(l.height(h.val()),k=!0):l.height(""),k&&!o&&a(".redactor-modal-close-btn")[0]&&(o=!0),b?(a("#redactor-modal-overlay").addClass("preview"),a("#redactor-modal").css({background:"rgba(255,255,255,0.667)"}).find("#redactor-modal-image-edit").css({background:"transparent"}),a("#redactor-modal-overlay").css({backgroundImage:"url("+l.attr("src")+")",backgroundSize:(g.val()?a.isNumeric(g.val())?g.val()+"px":g.val():"auto")+" "+(h.val()?a.isNumeric(h.val())?h.val()+"px":h.val():"auto")})):(a("#redactor-modal-overlay").removeClass("preview"),a("#redactor-modal").css({background:f[0]}).find("#redactor-modal-image-edit").css({background:f[1]}),a("#redactor-modal-overlay").css({backgroundImage:"",backgroundSize:""}))}function c(){_t=m.clone(),l.replaceWith(_t),l=null,l=_t,l.attr("style",n).css({opacity:""}),d.code.sync(),d.observe.load()}var d=this,e=a("#redactor-modal-body > section").append(document.createElement("hr")).append(a(document.createElement("div")).addClass("image-edit-dimensions")).find(".image-edit-dimensions"),f=[a("#redactor-modal").css("background"),a("#redactor-modal-image-edit").css("background")],g=a(document.createElement("input")).attr("type","text").attr("min","0").attr("maxlength","8").attr("pattern","d+(px|%|)").attr("data-redactor-deminsion-axis","x").attr("name","redactor-imageEdit-image-width").attr("id","redactor-imageEdit-image-width"),h=a(document.createElement("input")).attr("type","text").attr("min","0").attr("maxlength","8").attr("pattern","d+(px|%|)").attr("data-redactor-deminsion-axis","y").attr("name","redactor-imageEdit-image-height").attr("id","redactor-imageEdit-image-height"),i=a(document.createElement("input")).attr("disabled","disabled").attr("type","checkbox").attr("id","redactor-imageEdit-image-preview"),j=a(document.createElement("label")).attr("for","redactor-imageEdit-image-preview").text(this.opts.curLang.previewDimensions||"Preview Dimensions");j.prepend(i),e.append([a(document.createElement("div")).addClass("option").addClass("redactor-imageEdit-image-width").append(a(document.createElement("label")).attr("for","redactor-imageEdit-image-width").text(this.opts.curLang.width||"Width"),g),a(document.createElement("div")).addClass("option").addClass("redactor-imageEdit-image-height").append(a(document.createElement("label")).attr("for","redactor-imageEdit-image-height").text(this.opts.curLang.height||"Height"),h),a(document.createElement("div")).addClass("option").addClass("redactor-imageEdit-image-preview").append(j)]);var k,l=a("#redactor-image-box").children("img"),m=(l.parent(),l.clone().css("opacity","")),n=l.attr("style")||"",o=(a("#image-edit-dimensions").addClass("scalable"),!1),p=l.prop("style");p&&(p.width&&g.val(p.width),p.height&&h.val(p.height)),a.each([g,h],function(c,d){a(this).on("change keyup",function(a){g.val()||h.val()?i.removeAttr("disabled"):i.attr("disabled","disabled"),b(i.is(":checked"))})}),i.on("change",function(c){b(a(this).is(":checked"))}),d.$modalClose.on("click.redactor-modal",a.proxy(function(){c()},this)),a("#redactor-modal").click(function(b){a(b.target).hasClass("redactor-modal-close-btn")&&c()})}}}}(jQuery);