if(!RedactorPlugins)var RedactorPlugins={};!function(u){RedactorPlugins.imagepx=function(){return{init:function(){this.modal.addCallback("imageEdit",u.proxy(this.imagepx.imageEdit,this)),!1!==this.opts.showDimensionsOnResize&&this.$element.on("moveResizeCallback",function(e,t){var a,i=t.el.el.parent(),d=t.w+"x"+t.h;i.find(".dimensions")[0]?i.find(".dimensions").html(d):i.append(((a=u('<p class="dimensions" />')).html(d),a))})},imageEdit:function(){var e=this,t=u("#redactor-modal-body > section").append(document.createElement("hr")).append(u(document.createElement("div")).addClass("image-edit-dimensions")).find(".image-edit-dimensions"),a=[u("#redactor-modal").css("background"),u("#redactor-modal-image-edit").css("background")],i=u(document.createElement("input")).attr("type","text").attr("min","0").attr("maxlength","8").attr("pattern","d+(px|%|)").attr("data-redactor-deminsion-axis","x").attr("name","redactor-imageEdit-image-width").attr("id","redactor-imageEdit-image-width"),d=u(document.createElement("input")).attr("type","text").attr("min","0").attr("maxlength","8").attr("pattern","d+(px|%|)").attr("data-redactor-deminsion-axis","y").attr("name","redactor-imageEdit-image-height").attr("id","redactor-imageEdit-image-height"),r=u(document.createElement("input")).attr("disabled","disabled").attr("type","checkbox").attr("id","redactor-imageEdit-image-preview"),o=u(document.createElement("label")).attr("for","redactor-imageEdit-image-preview").text(this.opts.curLang.previewDimensions||"Preview Dimensions");o.prepend(r),t.append([u(document.createElement("div")).addClass("option").addClass("redactor-imageEdit-image-width").append(u(document.createElement("label")).attr("for","redactor-imageEdit-image-width").text(this.opts.curLang.width||"Width"),i),u(document.createElement("div")).addClass("option").addClass("redactor-imageEdit-image-height").append(u(document.createElement("label")).attr("for","redactor-imageEdit-image-height").text(this.opts.curLang.height||"Height"),d),u(document.createElement("div")).addClass("option").addClass("redactor-imageEdit-image-preview").append(o)]);var n,c=u("#redactor-image-box").children("img"),s=(c.parent(),c.clone().css("opacity","")),l=c.attr("style")||"",m=(u("#image-edit-dimensions").addClass("scalable"),!1),g=c.prop("style");function h(e){i.val()?(c.width(i.val()),n=!0):c.width(""),d.val()?(c.height(d.val()),n=!0):c.height(""),n&&!m&&u(".redactor-modal-close-btn")[0]&&(m=!0),e?(u("#redactor-modal-overlay").addClass("preview"),u("#redactor-modal").css({background:"rgba(255,255,255,0.667)"}).find("#redactor-modal-image-edit").css({background:"transparent"}),u("#redactor-modal-overlay").css({backgroundImage:"url("+c.attr("src")+")",backgroundSize:(i.val()?u.isNumeric(i.val())?i.val()+"px":i.val():"auto")+" "+(d.val()?u.isNumeric(d.val())?d.val()+"px":d.val():"auto")})):(u("#redactor-modal-overlay").removeClass("preview"),u("#redactor-modal").css({background:a[0]}).find("#redactor-modal-image-edit").css({background:a[1]}),u("#redactor-modal-overlay").css({backgroundImage:"",backgroundSize:""}))}function p(){_t=s.clone(),c.replaceWith(_t),c=null,(c=_t).attr("style",l).css({opacity:""}),e.code.sync(),e.observe.load()}g&&(g.width&&i.val(g.width),g.height&&d.val(g.height)),u.each([i,d],function(e,t){u(this).on("change keyup",function(e){i.val()||d.val()?r.removeAttr("disabled"):r.attr("disabled","disabled"),h(r.is(":checked"))})}),r.on("change",function(e){h(u(this).is(":checked"))}),e.$modalClose.on("click.redactor-modal",u.proxy(function(){p()},this)),u("#redactor-modal").click(function(e){u(e.target).hasClass("redactor-modal-close-btn")&&p()})}}}}(jQuery);