if(!RedactorPlugins)var RedactorPlugins={};if(function(r){RedactorPlugins.breadcrumb=function(){return{init:function(){var t=this;r(this.$editor).after('<p class="redactor_message_box redactor_breadcrumb" id="redactor_breadcrumb-'+this.uuid+'"><i class="icon icon-code"></i>&nbsp;<span></span></p>');var a=r("#redactor_breadcrumb-"+this.uuid);this.$editor.on("keyup.redactor-limiter",r.proxy(function(e){this.breadcrumb.handleChange(e)},this)).on("click",r.proxy(function(e){this.breadcrumb.handleChange(e)},this)).on("sync",r.proxy(function(e){this.breadcrumb.handleChange(e)},this)),this.$element.on("sourceCallback",function(e){t.opts.visual?a.show():a.hide()})},handleChange:function(e){var t=this.selection.getCurrent(),a=r("#redactor_breadcrumb-"+this.uuid),i=r(t).clone(),o=(i.find('*[data-verified="redactor"]'),i.closest("div.redactor-editor"),[]);if(r(t).parent().is("div.redactor-editor"))o.push(r(i)[0].tagName);else for(var n=r(t);r(n)[0]&&void 0!==n.parent()&&!n.is("div.redactor-editor");)o.push(r(n)[0].tagName),n=n.parent();o=o.reverse(),a.children("span").html(o.join("&nbsp;&raquo;&nbsp;"))}}}}(jQuery),!RedactorPlugins)RedactorPlugins={};if(function(n){RedactorPlugins.clips=function(){return{json:null,tags:[],getTemplate:function(){var i=this,e=this.clips.json;var o=n(document.createElement("section")).attr("id","redactor-modal-clips").append([n(document.createElement("select")).hide().append(n(document.createElement("option")).attr("value","").text("All")),n(document.createElement("ul")).addClass("redactor_clips_box")]);if(e&&e.length){var t="clipsmodal-"+n(".clipsmodal").size();o.attr("id",t);i.clips.tags;n.each(e,function(e,t){var a=n('<li class="redactor_clip_item"><a href="#" class="redactor_clip_link"'+(1==t.advanced?' data-advanced="1"':"")+'></a><div class="redactor_clip" style="display:none"></div></li>');a.children("a").html(t.title),a.children(".redactor_clip").html(t.clip),t.tags&&(a.addClass(t.tags),i.clips.tags=function(e){return e.filter(function(e,t,a){return t===a.indexOf(e)})}(n.merge(i.clips.tags,t.tags.split(" ")))),o.find(".redactor_clips_box").append(a)})}return n(o)[0].outerHTML},init:function(){if(this.opts.clipsJson){if("string"==typeof this.opts.clipsJson)try{this.clips.json=n.parseJSON(this.opts.clipsJson)}catch(e){return!1}this.clips.json||(this.clips.json=this.opts.clipsJson);var e=this.button.addAfter("link","clips","Clips");e.addClass("re-icon re-clips"),this.button.addCallback(e,this.clips.show)}},filter:function(e){if(e.trim()){e=e.trim().split(" "),n("#redactor-modal").find(".redactor_clip_item").hide();for(var t=0;t<e.length;t++){var a=e[t].trim();a&&n("#redactor-modal").find(".redactor_clip_item."+a).show()}}else n("#redactor-modal").find(".redactor_clip_item").show()},show:function(){var e=this;this.modal.addTemplate("clips",this.clips.getTemplate()),this.modal.load("clips",this.lang.get("clips")||"Clips",300),this.modal.createCancelButton(),this.selection.save(),this.modal.show();var t=e.clips.tags;if(t.length){n("#redactor-modal").find("select").show();for(var a=0;a<t.length;a++)n("#redactor-modal").find("select").append(n(document.createElement("option")).attr("value",t[a]).text(t[a]))}n("#redactor-modal").find("select").on("change",function(){e.clips.filter(n(this).find("option:selected").val().trim())}),n("#redactor-modal").find(".redactor_clips_box a").on("click",n.proxy(this.clips.clipClicked,this))},clipClicked:function(e){this.clips.insertClip(n(e.target).next().html(),void 0!==n(e.target).data("advanced"))},insertClip:function(e,t){this.selection.restore(),this.clean.isSingleLine(e),t?this.insert.htmlWithoutClean(e):this.insert.html(e,!0),this.modal.close(),this.observe.load()}}}}(jQuery),!RedactorPlugins)RedactorPlugins={};if(function(e){RedactorPlugins.contrast=function(){return{init:function(){e.extend(this.opts.shortcuts,{f5:{func:"contrast.toggle",params:[]}})},toggle:function(){this.$editor.toggleClass("redactor-editor_contrast")}}}}(jQuery),!RedactorPlugins)RedactorPlugins={};if(function(u){u.fn.animateRotate=function(a,e,t,i,o){var n=u.speed(e,t,o),r=n.step;return this.each(function(e,t){n.complete=u.proxy(n.complete,t),n.step=function(e){if(u.style(t,"transform","rotate("+e+"deg)"),r)return r.apply(t,arguments)},u({deg:i}).animate({deg:a},n)})},RedactorPlugins.counter=function(){return{init:function(){u(this.$editor).after('<p class="redactor_counter" id="redactor_counter-'+this.uuid+'"><span class="time-wrap"><i class="icon icon-power-off"></i>&nbsp;<span class="reading-time"></span></span>&emsp;&emsp;<span class="word-count-wrap"><i class="icon icon-keyboard-o"></i>&nbsp;<span class="word-count"></span></span></p>');var t=u("#redactor_counter-"+this.uuid);this.$editor.on("keyup.redactor-limiter",u.proxy(function(e){i(this)},this));var a=this;function i(e){var t=0,a=0,i=e.code.get().replace(/<\/(.*?)>/gi," ");if(i=(i=(i=(i=i.replace(/<(.*?)>/gi,"")).replace(/\t/gi,"")).replace(/\n/gi,"")).replace(/\r/gi,""),""!==(i=u.trim(i))){var o=i.split(/\s+/),n=i.match(/\s/g);o&&o.length,n&&(a=n.length),t=i.length}var r=e.opts.counterWPM||275,s=u(e.$editor).text().trim().split(/\s+/g).length,c=s/(r/60),d=function(e){var t,a,i,o;return t=e/1e3,a=Math.round(t%60),t/=60,i=Math.round(t%60),t/=60,o=Math.round(t%24),t/=24,{days:Math.round(t),hours:o,minutes:i,seconds:a}}(1e3*c),l="Estimated Read Time: ";d.hours&&(l+=d.hours.toString()+" "+(1<d.hours?"Hours ":"Hour ")),l+=d.minutes.toString()+" "+(1<d.minutes?"Minutes ":"Minute "),l+=d.seconds.toString()+" "+(1<d.seconds?"Seconds ":"Second ");var p=u(e.$editor).parent().children(".redactor_counter");p.find(".reading-time").text((d.hours?d.hours+":":"")+(d.minutes.toString().length<2?"0"+d.minutes.toString():d.minutes)+":"+(d.seconds.toString().length<2?"0"+d.seconds.toString():d.seconds)).parent().attr("title",l),p.find(".word-count").text(s.toLocaleString()+" words").parent().attr("title",t.toLocaleString()+" characters ("+Number(t-a).toLocaleString()+" non-space)");var h=c/3600*360;p.find(".icon-power-off").data("deg",h).animateRotate(h,180,"linear",p.find(".icon-power-off").data("deg"))}this.$element.on("sourceCallback",function(e){a.opts.visual?t.show():t.hide()}),i(this)}}}}(jQuery),!RedactorPlugins)RedactorPlugins={};if(function(e){RedactorPlugins.download=function(){return{init:function(){var e=this.button.add("download","Download");this.button.setAwesome("download","icon icon-download"),this.button.addCallback(e,this.download.download)},download:function(){e('<a target="_blank" download="content.html" href="data:text/html,'+encodeURI(this.code.get())+'"></a>').get(0).click()}}}}(jQuery),!RedactorPlugins)RedactorPlugins={};if(function(g){RedactorPlugins.imagepx=function(){return{init:function(){this.modal.addCallback("imageEdit",g.proxy(this.imagepx.imageEdit,this)),!1!==this.opts.showDimensionsOnResize&&this.$element.on("moveResizeCallback",function(e,t){var a,i=t.el.el.parent(),o=t.w+"x"+t.h;i.find(".dimensions")[0]?i.find(".dimensions").html(o):i.append(((a=g('<p class="dimensions" />')).html(o),a))})},imageEdit:function(){var e=this,t=g("#redactor-modal-body > section").append(document.createElement("hr")).append(g(document.createElement("div")).addClass("image-edit-dimensions")).find(".image-edit-dimensions"),a=[g("#redactor-modal").css("background"),g("#redactor-modal-image-edit").css("background")],i=g(document.createElement("input")).attr("type","text").attr("min","0").attr("maxlength","8").attr("pattern","d+(px|%|)").attr("data-redactor-deminsion-axis","x").attr("name","redactor-imageEdit-image-width").attr("id","redactor-imageEdit-image-width"),o=g(document.createElement("input")).attr("type","text").attr("min","0").attr("maxlength","8").attr("pattern","d+(px|%|)").attr("data-redactor-deminsion-axis","y").attr("name","redactor-imageEdit-image-height").attr("id","redactor-imageEdit-image-height"),n=g(document.createElement("input")).attr("disabled","disabled").attr("type","checkbox").attr("id","redactor-imageEdit-image-preview"),r=g(document.createElement("label")).attr("for","redactor-imageEdit-image-preview").text(this.opts.curLang.previewDimensions||"Preview Dimensions");r.prepend(n),t.append([g(document.createElement("div")).addClass("option").addClass("redactor-imageEdit-image-width").append(g(document.createElement("label")).attr("for","redactor-imageEdit-image-width").text(this.opts.curLang.width||"Width"),i),g(document.createElement("div")).addClass("option").addClass("redactor-imageEdit-image-height").append(g(document.createElement("label")).attr("for","redactor-imageEdit-image-height").text(this.opts.curLang.height||"Height"),o),g(document.createElement("div")).addClass("option").addClass("redactor-imageEdit-image-preview").append(r)]);var s,c=g("#redactor-image-box").children("img"),d=(c.parent(),c.clone().css("opacity","")),l=c.attr("style")||"",p=(g("#image-edit-dimensions").addClass("scalable"),!1),h=c.prop("style");function u(e){i.val()?(c.width(i.val()),s=!0):c.width(""),o.val()?(c.height(o.val()),s=!0):c.height(""),s&&!p&&g(".redactor-modal-close-btn")[0]&&(p=!0),e?(g("#redactor-modal-overlay").addClass("preview"),g("#redactor-modal").css({background:"rgba(255,255,255,0.667)"}).find("#redactor-modal-image-edit").css({background:"transparent"}),g("#redactor-modal-overlay").css({backgroundImage:"url("+c.attr("src")+")",backgroundSize:(i.val()?g.isNumeric(i.val())?i.val()+"px":i.val():"auto")+" "+(o.val()?g.isNumeric(o.val())?o.val()+"px":o.val():"auto")})):(g("#redactor-modal-overlay").removeClass("preview"),g("#redactor-modal").css({background:a[0]}).find("#redactor-modal-image-edit").css({background:a[1]}),g("#redactor-modal-overlay").css({backgroundImage:"",backgroundSize:""}))}function m(){_t=d.clone(),c.replaceWith(_t),c=null,(c=_t).attr("style",l).css({opacity:""}),e.code.sync(),e.observe.load()}h&&(h.width&&i.val(h.width),h.height&&o.val(h.height)),g.each([i,o],function(e,t){g(this).on("change keyup",function(e){i.val()||o.val()?n.removeAttr("disabled"):n.attr("disabled","disabled"),u(n.is(":checked"))})}),n.on("change",function(e){u(g(this).is(":checked"))}),e.$modalClose.on("click.redactor-modal",g.proxy(function(){m()},this)),g("#redactor-modal").click(function(e){g(e.target).hasClass("redactor-modal-close-btn")&&m()})}}}}(jQuery),!RedactorPlugins)RedactorPlugins={};if(function(a){RedactorPlugins.imageurl=function(){return{init:function(){this.$element.on("modalOpenedCallback",a.proxy(this.imageurl.load,this))},load:function(){var t=this;a("#redactor-modal-image-insert").length&&(t.modal.addTab("image-url","Image URL","active"),a('#redactor-modal-tabber a[rel="tabimage-url"]').click(function(e){a("#redactor-modal").removeClass("expanded eureka-modal"),a("#eureka-modal-footer").hide()}),a("#redactor-modal-image-insert").append(a(document.createElement("form")).attr("id","insert-image-form").addClass("redactor-tab redactor-tabimage-url").hide().append([a('<label for="image-url" class="redactor-image-link-option">').html("Image URL"),a('<input type="url" name="image-url" id="image-url-input" placeholder="Absolute URL to Image">'),a('<footer id="insert-image-footer">').html(a('<button id="insert-url-btn" type="submit">').addClass("redactor-modal-btn redactor-modal-action-btn").html("Insert"))])),a("#insert-image-form").submit(function(e){e.preventDefault(),t.image.insert({filelink:a("#image-url-input").val()}),t.image.onDrop(),t.modal.close(),t.selection.restore()}))}}}}(jQuery),!RedactorPlugins)RedactorPlugins={};if(function(i){RedactorPlugins.norphan=function(){return{init:function(){if(void 0===this.opts.syncBeforeCallback&&this.opts.tabifier){var a=this;a.opts.syncBeforeCallback=function(e){var t=i(document.createElement("div"));return t.html(e),t.find("div,p,h1,h2,h3,h4,h5,h6,blockquote,dd,dt,figcaption").each(function(){i(this).replaceWith(a.norphan.adopt(i(this).get(0).outerHTML))}),a.tabifier.get(t.html())}}},adopt:function(e){for(var t="",a=String(e).reverse().split(""),i=!1,o=!1,n=0;n<a.length;n++)">"==a[n]?_ignore=!0:"<"==a[n]?o=!(_ignore=!1):0<a[n].trim().length&&(o=!1),_ignore||i||" "!=a[n]||o?t+=a[n]:(t+=String("&nbsp;").reverse(),i=!0);return t.reverse()}}}}(jQuery),!RedactorPlugins)RedactorPlugins={};if(function(s){RedactorPlugins.replacer=function(){return{getTemplate:function(){return String()+'<section id="redactor-modal-replacer"><p>Search and replace found text.</p><label for="redactor-replacer-find">Search</label><input type="text" size="5" id="redactor-replacer-find" required /><label for="redactor-replacer-replace">Replace</label><input type="text" size="5" id="redactor-replacer-replace" required /><div class="options"><label><input type="checkbox" id="redactor-replacer-ignore-case" /> Ignore Case</label></div></section>'},init:function(){if(this.opts.replacerButton){var e=this.button.add("replacer","Find & Replace");this.button.setAwesome("replacer","icon icon-search"),this.button.addCallback(e,this.replacer.show)}s.extend(this.opts.shortcuts,{"ctrl+f":{func:"replacer.show",params:[]}})},show:function(){this.modal.addTemplate("replacer",this.replacer.getTemplate()),this.modal.load("replacer",this.lang.get("replacer")||"Replacer",300),this.modal.createCancelButton(),this.modal.createActionButton("Replace").on("click",this.replacer.replace),this.sel&&this.sel.toString()&&(s("#redactor-replacer-find").val(this.sel.toString()),s("#redactor-replacer-replace").focus()),this.selection.save(),this.modal.show(),s("#redactor-modal-replacer").focus()},replace:function(){var e,t,a,i,o=s("#redactor-replacer-find").val(),n=s("#redactor-replacer-replace").val(),r=s("#redactor-replacer-ignore-case").is(":checked");o&&n&&this.insert.set((e=o,t=n,a=this.$editor.html(),i="g"+(r?"i":""),a.replace(e instanceof RegExp?e:new RegExp(e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&"),i),t))),this.modal.close(),this.selection.restore()}}}}(jQuery),!RedactorPlugins)RedactorPlugins={};if(function(s){var t=!1;s(window).keydown(function(e){18==e.which&&(t=!0)}).keyup(function(e){18==e.which&&(t=!1)}),RedactorPlugins.speek=function(){var n,r=window.speechSynthesis.getVoices();return window.speechSynthesis.onvoiceschanged=function(e){r=window.speechSynthesis.getVoices()},{getTemplate:function(){var a=s(document.createElement("section"));a.attr("id","redactor-modal-speek"),a.append("<p>Listen as you wish.</p>"),a.append('<label for="voice">Voice</label>'),a.append(document.createElement("select")),s.each(r,function(e,t){a.find("select").attr("id","voice").attr("name","voice").append(s('<option value="'+t.name+'">'+t.name+"</option>"))});var e=s('<div class="options"></div>');return e.append('<label for="volume">Volume</label><input data-varname="speechVolume" type="range" min="0" max="1" step="0.1" name="volume" id="volume" value="1">'),e.append('<label for="rate">Rate</label><input data-varname="speechRate" type="range" min="0" max="1" step="0.1" name="Rate" id="rate" value="1">'),e.append('<label for="pitch">Pitch</label><input data-varname="speechPitch" type="range" min="0" max="1" step="0.1" name="pitch" id="pitch" value="1">'),a.append(e),s(a)[0].outerHTML},init:function(){if(!(!1 in window)){var e=this,t=this.button.add("speek","Listen");this.button.setAwesome("speek","icon icon-headphones"),this.button.addCallback(t,this.speek.clicked),s.extend(this.opts.shortcuts,{esc:{func:"speek.shutup",params:[]}}),this.$element.on("modalClosedCallback",function(){e.speek.shutup()})}},clicked:function(){t?this.speek.show():this.speek.speek()},speek:function(){var e=window.speechSynthesis.speaking;this.speek.shutup();var t=this.button.get("speek"),a=this.opts.speechVoice||"Vicki";if(!e){var i=this.code.get(),o=[];s(i).each(function(e,t){o.push(s(t).text())}),i=o.join(" "),(n=new SpeechSynthesisUtterance).text=i,n.lang=this.opts.speechLang||"en-US",n.voice=r.filter(function(e){return e.name==a})[0],n.rate=void 0!==this.opts.speechRate?this.opts.speechRate:1,n.pitch=void 0!==this.opts.speechPitch?this.opts.speechPitch:1,n.volume=void 0!==this.opts.speechVolume?this.opts.speechVolume:1,n.onend=n.onerror=function(){t.removeClass("speaking")},n.onstart=n.onresume=function(){t.addClass("speaking")},window.speechSynthesis.speak(n),t.addClass("speaking")}},show:function(){var e=this.button.get("speek"),t=this;this.modal.addTemplate("choose-voice",this.speek.getTemplate()),this.modal.load("choose-voice",this.lang.get("choose-voice")||"Choose Voice",300),this.modal.createCancelButton(),(e=this.modal.createActionButton("Listen")).on("click",this.speek.close),s("#redactor-modal-speek select").on("change",function(){var e=s(this).val();t.speek.vocalChange(e)}),s("#redactor-modal-speek select").val(t.opts.speechVoice),s("#redactor-modal-speek #volume, #redactor-modal-speek #rate, #redactor-modal-speek #pitch").each(function(){s(this).on("change",function(){e=t.button.get("speek"),t.opts[s(this).data("varname")]=s(this).val(),t.speek.shutup(),t.speek.speek(),e.addClass("speaking")}).val(t.opts[s(this).data("varname")])}),this.selection.save(),this.modal.show()},close:function(){this.modal.close(),this.speek.shutup(),this.speek.speek(),this.selection.restore()},vocalChange:function(t){var e=this.button.get("speek"),a=r.filter(function(e){return e.name==t})[0];a&&(this.opts.speechVoice=a.name,this.speek.shutup(),this.speek.speek(),e.addClass("speaking"))},shutup:function(){var e=!!window.speechSynthesis.speaking;window.speechSynthesis.cancel();var t=this.button.get("speek");if(n)try{n.cancel()}catch(e){}return window.speechSynthesis.cancel(),n=null,t.removeClass("speaking"),e}}}}(jQuery),!RedactorPlugins)RedactorPlugins={};if(function(n){var r=!1;RedactorPlugins.syntax=function(){return{init:function(){var e=this;void 0===e.opts.aceLoaded&&(e.opts.aceLoaded=!1),e.opts.aceLoaded||("undefined"==typeof ace?(r=!0,n.getScript(e.opts.aceOfflineSource,function(){e.syntax.handleLoaded()})):e.syntax.handleLoaded())},handleLoaded:function(){var a=this;a.$textarea.after('<div class="redactor__modx-code-pretty-content" rows="4" style="display:none"></div>');var i=a.$textarea.parent().children("div.redactor__modx-code-pretty-content").attr("id","redactor__modx-code-pretty-content"+a.uuid);r&&(ace.config.set("modePath",a.opts.assetsUrl+"lib/ace/"),ace.config.set("workerPath",a.opts.assetsUrl+"lib/ace/"),ace.config.set("themePath",a.opts.assetsUrl+"lib/ace/"));var o=ace.edit("redactor__modx-code-pretty-content"+a.uuid);o.setTheme(a.opts.aceTheme||"ace/theme/chrome"),o.getSession().setMode(a.opts.aceMode||"ace/mode/html"),o.getSession().setUseWorker(a.opts.useWorkers||!1),o.setValue(a.tabifier.get(a.$textarea.val())),void 0!==a.opts.aceUseSoftTabs&&o.getSession().setUseSoftTabs(a.opts.aceUseSoftTabs),void 0!==a.opts.aceTabSize&&parseInt(a.opts.aceTabSize)&&o.getSession().setTabSize(parseInt(a.opts.aceTabSize)),void 0!==a.opts.aceUseWrapMode&&o.getSession().setUseWrapMode(a.opts.aceUseWrapMode),void 0!==a.opts.aceHighlightActiveLine&&o.setHighlightActiveLine(a.opts.aceHighlightActiveLine),void 0!==a.opts.aceReadOnly&&o.setReadOnly(a.opts.aceReadOnly);a.$textarea;a.$element.on("sourceCallback",function(e){var t=a.$textarea.height();a.$textarea.hide(),o.setValue(a.tabifier.get(a.$textarea.val())),i.show().height(t),o.resize()});var t=n(document.getElementById("redactor__modx-code-pretty-content"+a.uuid));a.$element.on("visualCallback",function(e){a.insert.set(o.getValue(),!1),t.hide()}),o.on("change",function(e){a.$textarea.val(o.getValue())}),void 0!==a.opts.aceFontSize&&t.css({fontSize:a.opts.aceFontSize}),a.opts.aceLoaded=!0}}}}(jQuery),!RedactorPlugins)RedactorPlugins={};if(jQuery,RedactorPlugins.wym=function(){return{init:function(){this.$editor.addClass("redactor-editor_wym")}}},!RedactorPlugins)RedactorPlugins={};!function(e){RedactorPlugins.zoom=function(){return{init:function(){void 0===this.opts.zoomLevel&&(this.opts.zoomLevel=0),e.extend(this.opts.shortcuts,{"ctrl+=":{func:"zoom.zoom",params:[1]},"ctrl+-":{func:"zoom.zoom",params:[-1]}})},zoom:function(e){this.opts.zoomLevel+=e,this.opts.zoomLevel=Math.min(3,this.opts.zoomLevel),this.opts.zoomLevel=Math.max(0,this.opts.zoomLevel),this.$editor.addClass("redactor-editor__zoom").removeClass("redactor-editor__zoom-0").removeClass("redactor-editor__zoom-1").removeClass("redactor-editor__zoom-2").removeClass("redactor-editor__zoom-3").addClass("redactor-editor__zoom-"+this.opts.zoomLevel)}}}}(jQuery);