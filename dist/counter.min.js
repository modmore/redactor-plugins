if(!RedactorPlugins)var RedactorPlugins={};!function(g){g.fn.animateRotate=function(n,t,e,r,o){var i=g.speed(t,e,o),s=i.step;return this.each(function(t,e){i.complete=g.proxy(i.complete,e),i.step=function(t){if(g.style(e,"transform","rotate("+t+"deg)"),s)return s.apply(e,arguments)},g({deg:r}).animate({deg:n},i)})},RedactorPlugins.counter=function(){return{init:function(){g(this.$editor).after('<p class="redactor_counter" id="redactor_counter-'+this.uuid+'"><span class="time-wrap"><i class="icon icon-power-off"></i>&nbsp;<span class="reading-time"></span></span>&emsp;&emsp;<span class="word-count-wrap"><i class="icon icon-keyboard-o"></i>&nbsp;<span class="word-count"></span></span></p>');var e=g("#redactor_counter-"+this.uuid);this.$editor.on("keyup.redactor-limiter",g.proxy(function(t){r(this)},this));var n=this;function r(t){var e=0,n=0,r=t.code.get().replace(/<\/(.*?)>/gi," ");if(r=(r=(r=(r=r.replace(/<(.*?)>/gi,"")).replace(/\t/gi,"")).replace(/\n/gi,"")).replace(/\r/gi,""),""!==(r=g.trim(r))){var o=r.split(/\s+/),i=r.match(/\s/g);o&&o.length,i&&(n=i.length),e=r.length}var s=t.opts.counterWPM||275,a=g(t.$editor).text().trim().split(/\s+/g).length,c=a/(s/60),u=function(t){var e,n,r,o;return e=t/1e3,n=Math.round(e%60),e/=60,r=Math.round(e%60),e/=60,o=Math.round(e%24),e/=24,{days:Math.round(e),hours:o,minutes:r,seconds:n}}(1e3*c),d="Estimated Read Time: ";u.hours&&(d+=u.hours.toString()+" "+(1<u.hours?"Hours ":"Hour ")),d+=u.minutes.toString()+" "+(1<u.minutes?"Minutes ":"Minute "),d+=u.seconds.toString()+" "+(1<u.seconds?"Seconds ":"Second ");var p=g(t.$editor).parent().children(".redactor_counter");p.find(".reading-time").text((u.hours?u.hours+":":"")+(u.minutes.toString().length<2?"0"+u.minutes.toString():u.minutes)+":"+(u.seconds.toString().length<2?"0"+u.seconds.toString():u.seconds)).parent().attr("title",d),p.find(".word-count").text(a.toLocaleString()+" words").parent().attr("title",e.toLocaleString()+" characters ("+Number(e-n).toLocaleString()+" non-space)");var l=c/3600*360;p.find(".icon-power-off").data("deg",l).animateRotate(l,180,"linear",p.find(".icon-power-off").data("deg"))}this.$element.on("sourceCallback",function(t){n.opts.visual?e.show():e.hide()}),r(this)}}}}(jQuery);