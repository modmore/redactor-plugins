if(!RedactorPlugins)var RedactorPlugins={};!function(i){var c=!1;RedactorPlugins.syntax=function(){return{init:function(){var e=this;void 0===e.opts.aceLoaded&&(e.opts.aceLoaded=!1),e.opts.aceLoaded||("undefined"==typeof ace?(c=!0,i.getScript(e.opts.aceOfflineSource,function(){e.syntax.handleLoaded()})):e.syntax.handleLoaded())},handleLoaded:function(){var a=this;a.$textarea.after('<div class="redactor__modx-code-pretty-content" rows="4" style="display:none"></div>');var o=a.$textarea.parent().children("div.redactor__modx-code-pretty-content").attr("id","redactor__modx-code-pretty-content"+a.uuid);c&&(ace.config.set("modePath",a.opts.assetsUrl+"lib/ace/"),ace.config.set("workerPath",a.opts.assetsUrl+"lib/ace/"),ace.config.set("themePath",a.opts.assetsUrl+"lib/ace/"));var s=ace.edit("redactor__modx-code-pretty-content"+a.uuid);s.setTheme(a.opts.aceTheme||"ace/theme/chrome"),s.getSession().setMode(a.opts.aceMode||"ace/mode/html"),s.getSession().setUseWorker(a.opts.useWorkers||!1),s.setValue(a.tabifier.get(a.$textarea.val())),void 0!==a.opts.aceUseSoftTabs&&s.getSession().setUseSoftTabs(a.opts.aceUseSoftTabs),void 0!==a.opts.aceTabSize&&parseInt(a.opts.aceTabSize)&&s.getSession().setTabSize(parseInt(a.opts.aceTabSize)),void 0!==a.opts.aceUseWrapMode&&s.getSession().setUseWrapMode(a.opts.aceUseWrapMode),void 0!==a.opts.aceHighlightActiveLine&&s.setHighlightActiveLine(a.opts.aceHighlightActiveLine),void 0!==a.opts.aceReadOnly&&s.setReadOnly(a.opts.aceReadOnly);a.$textarea;a.$element.on("sourceCallback",function(e){var t=a.$textarea.height();a.$textarea.hide(),s.setValue(a.tabifier.get(a.$textarea.val())),o.show().height(t),s.resize()});var t=i(document.getElementById("redactor__modx-code-pretty-content"+a.uuid));a.$element.on("visualCallback",function(e){a.insert.set(s.getValue(),!1),t.hide()}),s.on("change",function(e){a.$textarea.val(s.getValue())}),void 0!==a.opts.aceFontSize&&t.css({fontSize:a.opts.aceFontSize}),a.opts.aceLoaded=!0}}}}(jQuery);