if(!RedactorPlugins)var RedactorPlugins={};!function(a){var b=!1;RedactorPlugins.syntax=function(){return{init:function(){var c=this;void 0===c.opts.aceLoaded&&(c.opts.aceLoaded=!1),c.opts.aceLoaded||("undefined"==typeof ace?(b=!0,a.getScript(c.opts.aceOfflineSource,function(){c.syntax.handleLoaded()})):c.syntax.handleLoaded())},handleLoaded:function(){var c=this;c.$textarea.after('<div class="redactor__modx-code-pretty-content" rows="4" style="display:none"></div>');var d=c.$textarea.parent().children("div.redactor__modx-code-pretty-content").attr("id","redactor__modx-code-pretty-content"+c.uuid);b&&(ace.config.set("modePath",c.opts.assetsUrl+"lib/ace/"),ace.config.set("workerPath",c.opts.assetsUrl+"lib/ace/"),ace.config.set("themePath",c.opts.assetsUrl+"lib/ace/"));var e=ace.edit("redactor__modx-code-pretty-content"+c.uuid);e.setTheme(c.opts.aceTheme||"ace/theme/chrome"),e.getSession().setMode(c.opts.aceMode||"ace/mode/html"),e.getSession().setUseWorker(c.opts.useWorkers||!1),e.setValue(c.tabifier.get(c.$textarea.val())),void 0!==c.opts.aceUseSoftTabs&&e.getSession().setUseSoftTabs(c.opts.aceUseSoftTabs),void 0!==c.opts.aceTabSize&&parseInt(c.opts.aceTabSize)&&e.getSession().setTabSize(parseInt(c.opts.aceTabSize)),void 0!==c.opts.aceUseWrapMode&&e.getSession().setUseWrapMode(c.opts.aceUseWrapMode),void 0!==c.opts.aceHighlightActiveLine&&e.setHighlightActiveLine(c.opts.aceHighlightActiveLine),void 0!==c.opts.aceReadOnly&&e.setReadOnly(c.opts.aceReadOnly);c.$textarea;c.$element.on("sourceCallback",function(a){var b=c.$textarea.height();c.$textarea.hide(),e.setValue(c.tabifier.get(c.$textarea.val())),d.show().height(b),e.resize()});var f=a(document.getElementById("redactor__modx-code-pretty-content"+c.uuid));c.$element.on("visualCallback",function(a){c.insert.set(e.getValue(),!1),f.hide()}),e.on("change",function(a){c.$textarea.val(e.getValue())}),void 0!==c.opts.aceFontSize&&f.css({fontSize:c.opts.aceFontSize}),c.opts.aceLoaded=!0}}}}(jQuery);